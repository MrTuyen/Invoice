(function(n){"use strict";function r(n,i){var r=document,l,s,v,a,c,h;if(!r.getElementById("modalContainer")){l=r.getElementsByTagName("body")[0].appendChild(r.createElement("div"));l.id="modalContainer";l.style.height=r.documentElement.scrollHeight+"px";s=l.appendChild(r.createElement("div"));s.id="alertBox";r.all&&!window.opera&&(s.style.top=document.documentElement.scrollTop+"px");s.style.left=(r.documentElement.scrollWidth-s.offsetWidth)/2+"px";s.style.visiblity="visible";v=s.appendChild(r.createElement("h1"));v.appendChild(r.createTextNode(u));var y=s.appendChild(r.createElement("p")),p=new RegExp("\n","g");n=n.replace(/(?:\\n)/g,"<br>");y.innerHTML=n;i?(a=s.appendChild(r.createElement("div")),a.className="btnGroup",c=a.appendChild(r.createElement("button")),c.id="cancelBtnAlert",c.className="btn btn-default",c.appendChild(r.createTextNode(o)),c.href="#",c.onclick=function(){return t(),i(!1),!1},h=a.appendChild(r.createElement("button")),h.className="btn btn-success",h.appendChild(r.createTextNode(e)),h.href="#",h.onclick=function(){return t(),i(!0),!1}):(h=s.appendChild(r.createElement("button")),h.id="closeBtnAlert",h.className="btn btn-success",h.appendChild(r.createTextNode(f)),h.href="#",h.onclick=function(){return t(),!1});s.style.display="block"}}var u="Thông báo",f="Ok",e="Đồng ý",o="Bỏ qua",t=function(){document.getElementsByTagName("body")[0].removeChild(document.getElementById("modalContainer"))},i;document.getElementById&&(window.alert=function(n){r(n,null)},window.confirm=function(n,t){r(n,t)});n(".navbar-xbootstrap, .cover-bg").click(function(){n(".nav-xbootstrap").toggleClass("visible");n(".cover-bg").toggle()});n('[name="lb_search_invoice"]').change(function(){var t=n(".frm-search-text"),i=n(".frm-search-file");n('[name="lb_search_invoice"]:checked').attr("id")==="lb_search_by_symbol"?(t.show(),i.hide()):(t.hide(),i.show())});n(".frm-search-file").click(function(){n("#input_select_file").trigger("click")});n("#input_select_file").change(function(){if(this.files&&this.files[0]){var t=new FileReader;t.onload=function(){var t=n("#input_select_file").val().split("\\");n('[name="file-xml"]').val(t[t.length-1]);i()};t.readAsDataURL(this.files[0])}});n("#cmd_search").click(function(){var f=n('[name="lb_search_invoice"]:checked').attr("id")==="lb_search_by_symbol"?!0:!1,t,r,u;if(f){if(t=n('[name="keyword"]').val(),t==null||t.trim()=="")return alert("Mã tra cứu không được để trống. \nVui lòng nhập mã tra cứu."),!1;r=n(".toggle-show");r.toggleClass("d-none");u=JSON.stringify({id:t});n.ajax({url:"/tracuu/search_by_code",type:"POST",headers:{"X-Requested-With":"Novaon-DS","Token-String":"","Device-UUID":""},timeout:6e4,cache:!0,crossDomain:!0,contentType:"application/json; charset=utf-8;",dataType:"json",data:u,processData:!0,async:!0,tryCount:0,retryLimit:3,success:function(t){if(t&&t.rs){var i=window.innerHeight-100;n("#popupViewInvoice").dialog({modal:!0,resizable:!1,open:function(){}})}else alert("Mã tra cứu không đúng. Vui lòng xem lại.\n\nMã tra cứu được tạo ra tự động bởi hệ thống OnFinance.asia của NOVAON và được ghi dưới mỗi hóa đơn điện tử.");r.toggleClass("d-none")},error:function(n){r.toggleClass("d-none");console.log(n)}})}else i()});i=function(){var i=n("#fFile")[0].files[0],r,f,t,u;i?i.name!=null&&i.name!=""&&(r=i.name.split("."),f=r[r.length-1],f=="xml"?(t="",u=new FileReader,u.onload=function(n){t=n.target.result;t!=null&&t.length>0&&t[0]!="<"&&(t=t.substring(1))},u.readAsText(i)):einvoiceSearch.ShowErrorMessage("File không đúng chuẩn định dạng của hóa đơn. Vui lòng chọn lại.")):einvoiceSearch.ShowErrorMessage("File không được để trống. Vui lòng chọn file xml để tra cứu.")}})(jQuery);