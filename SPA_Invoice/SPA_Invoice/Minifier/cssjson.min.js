var CSSJSON=new function(){var n=this;n.init=function(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.repeat=function(n){return new Array(1+n).join(this)}};n.init();var o=/\/\*[\s\S]*?\*\//g,s=/([^\:]+):([^\;]*);/,h=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gmi,r=1,u=2,c=3,f=4,t=function(n){return typeof n=="undefined"||n.length==0||n==null},l=function(n){return t(n)?!1:n.attributes&&n.children};n.toJSON=function(i,e){var l={children:{},attributes:{}},y=null,w=0,e,ut,p,nt,b,k,tt,it,d,a,g,v,rt;for(typeof e=="undefined"&&(e={ordered:!1,comments:!1,stripComments:!1,split:!1}),e.stripComments&&(e.comments=!1,i=i.replace(o,""));(y=h.exec(i))!=null;)if(!t(y[r])&&e.comments)ut=y[r].trim(),l[w++]=ut;else if(t(y[u]))if(t(y[c]))t(y[f])||(it=y[f].trim(),d=s.exec(it),d?(a=d[1].trim(),g=d[2].trim(),e.ordered?(v={},v.name=a,v.value=g,v.type="attr",l[w++]=v):a in l.attributes?(rt=l.attributes[a],rt instanceof Array||(l.attributes[a]=[rt]),l.attributes[a].push(g)):l.attributes[a]=g):l[w++]=it);else return l;else if(a=y[u].trim(),p=n.toJSON(i,e),e.ordered)v={},v.name=a,v.value=p,v.type="rule",l[w++]=v;else for(nt=e.split?a.split(","):[a],b=0;b<nt.length;b++)if(k=nt[b].trim(),k in l.children)for(tt in p.attributes)l.children[k].attributes[tt]=p.attributes[tt];else l.children[k]=p;return l};n.toCSS=function(n,t,r){var u="",f,o,s;if(typeof t=="undefined"&&(t=0),typeof r=="undefined"&&(r=!1),n.attributes)for(i in n.attributes)if(f=n.attributes[i],f instanceof Array)for(o=0;o<f.length;o++)u+=e(i,f[o],t);else u+=e(i,f,t);if(n.children){s=!0;for(i in n.children)r&&!s?u+="\n":s=!1,u+=y(i,n.children[i],t)}return u};n.toHEAD=function(i,r,u){var s=document.getElementsByTagName("head")[0],e=document.getElementById(r),o=e!==null&&e instanceof HTMLStyleElement,f;if(!t(i)&&s instanceof HTMLHeadElement){if(o)if(u===!0||t(u))e.removeAttribute("id");else return;if(l(i)&&(i=n.toCSS(i)),f=document.createElement("style"),f.type="text/css",f.id=t(r)?"cssjson_"+v():r,f.styleSheet?f.styleSheet.cssText=i:f.appendChild(document.createTextNode(i)),s.appendChild(f),a(f))o&&e.parentNode.removeChild(e);else if(f.parentNode.removeChild(f),o)e.setAttribute("id",r),f=e;else return;return f}};typeof window!="undefined"&&(window.createCSS=n.toHEAD);var a=function(n){return n instanceof HTMLStyleElement&&n.sheet.cssRules.length>0},v=function(){return Date.now()||+new Date},e=function(n,t,i){return"\t".repeat(i)+n+": "+t+";\n"},y=function(t,i,r){var u="\t".repeat(r)+t+" {\n";return u+=n.toCSS(i,r+1),u+("\t".repeat(r)+"}\n")}};typeof module=="object"&&(module.exports=CSSJSON);