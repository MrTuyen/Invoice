function CreatePagerSubmit(n,t,i,r){var u=GenHtmlPager(n,t);i.html(u);i.find("span").click(function(){if($(this).text()!="..."){r==null&&(r="frmSearch");var n=parseInt($(this).text());$("#"+r+" #hdPageIndex").val(n);$("#"+r).submit();i.css("opactity","0.5");i.css("cursor","progress")}})}function CreatePagerAjax(n,t,i,r){var u=GenHtmlPager(n,t);i.html(u);i.find("span").click(function(){if($(this).text()!="..."){var n=parseInt($(this).text());dyn_functions[r](n);i.css("opactity","0.5");i.css("cursor","progress")}})}function CreateDivPagerAjax(n,t,i,r,u,f,e,o){var s=GenHtmlPager(n,t);i.html(s);i.find("span").click(function(){if($(this).text()!="..."){var n=parseInt($(this).text());dyn_functions[e](r,u,f,n,o);i.css("opactity","0.5");i.css("cursor","progress")}})}function GenHtmlPager(n,t){var i="",s=8,u,e,f,o,r;if(!(t<1)&&!(n<1)){if(t<s)for(r=1;r<=t;r++)r!=n?(i+='<span class="btn pagerbtn">',i+=r,i+="<\/span>"):(i+='<span class="btn active pagerbtn">',i+=r,i+="<\/span>");else{for(u=Math.floor((s-2)/2),e=n-u,e<1&&(e=1),f=n+u,f>t&&(f=t),f-e<=2*u&&(f=e+2*u),n-u>1?(i+='<span class="btn pagerbtn">',i+=1,i+="<\/span>",n-u>2&&(i+='<span class="btn pagerbtn">...<\/span>')):f++,f>=t&&(f=t,e=f-2*u),o="",n+u<t?(n+u<t-1&&(o+='<span class="btn pagerbtn">...<\/span>'),o+='<span class="btn pagerbtn">',o+=t,o+="<\/span>"):e--,r=e;r<=f;r++)r!=n?(i+='<span class="btn pagerbtn" page="'+r+'">',i+=r,i+="<\/span>"):(i+='<span class="btn active pagerbtn" page="'+r+'">',i+=r,i+="<\/span>");i+=o}return i}}function printDiv(n){var t=document.getElementById(n).innerHTML,i=document.body.innerHTML;document.body.innerHTML=t;window.print();document.body.innerHTML=i}function CheckAll(n,t){$(n).attr("checked")?$("input:checkbox[id="+t+"]").attr("checked",!0):$("input:checkbox[id="+t+"]").attr("checked",!1)}function ShowLoading(n){document.getElementById("loading-page").style.display=n?"block":"none"}function setCookie(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toGMTString();document.cookie=n+"="+t+";"+u+";path=/"}function getCookie(n){var u=n+"=",f=document.cookie,r,i,t;try{f=decodeURIComponent(document.cookie)}catch(e){console.log(e)}for(r=f.split(";"),i=0;i<r.length;i++){for(t=r[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(u)==0)return t.substring(u.length,t.length)}}function checkCookie(){}function UpdateFormat(n,t){t===undefined&&(t=ParseVietnameseNumber($(n).val()),t===!1&&(t=$(n).val()));t=FormatVietnameseNumber(t);t!==!1&&$(n).val(t)}function ParseVietnameseNumber(n){if(!ValidateVietnameseNumber(n))return!1;var t=n.toString().replace(/\./g,"").replace(/\,/g,".");return(n=parseFloat(t),isNaN(n))?!1:n}function ValidateVietnameseNumber(n){var r,t,u;if(n===undefined||(n=n.toString(),r=n.split(","),r.length>2)||r.length==2&&r[1].indexOf(".")>=0)return!1;for(i=0;i<r.length;i++)if(r[i].length==0)return!1;if(t=n.split("."),t.length==1)return!isNaN(t[0].replace(/\,/g,"."));for(i=0;i<t.length;i++)if(t[i].length==0||(u="first",i>0&&i<t.length-1?u="middle":i>0&&i==t.length-1&&(u="last"),!CheckPartVietnameseNumber(u,t[i])))return!1;return!0}function CheckPartVietnameseNumber(n,t){var i=t.indexOf(","),r;if(n=="first"){if(t.length>3||i>=0)return!1}else if(n=="middle"){if(t.length!=3||i>=0)return!1}else if(n=="last"){if(r=t.split(","),r[0].length!=3)return!1;t=t.replace(",",".")}else return!1;return!isNaN(t)}function Comma(n){n+="";n=n.replace(".","");n=n.replace(".","");n=n.replace(".","");n=n.replace(".","");n=n.replace(".","");n=n.replace(".","");x=n.split(",");x1=x[0];x2=x.length>1?","+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1.$2");return x1+x2}function replaceAll(n,t,i){var r=n.toString().split(t);return r.join(i)}function formatCurrency(n){var t=n%1;if(t>0)return n.formatMoney(2,",",".")}function formatCurrency(n,t){var i=n%1;return i>0?n.formatMoney(t,",","."):formatMoneynum.formatMoney(0,",",".")}function FormatVietnameseNumber(n){var r,t,i;if(isNaN(n))return!1;for(r=n.toString().split("."),n="",t=r[0];t.length>0;)i=t.length-3,i<0&&(i=0),n.length>0&&(n="."+n),n=t.substring(i)+n,t=t.substring(0,i);return r.length>1&&(n=n+","+r[1]),console.log(n),n}function Beep(){var n=new Audio("data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=");n.play()}var app=angular.module("novaon",["ngRoute","angular-loading-bar","ngSanitize"]),dyn_functions,callbackExec,validation;app.config(["$routeProvider","$locationProvider",function(n,t){n.when("/tong-quan",{templateUrl:"/Home/Home"}).when("/quan-ly-hoa-don",{templateUrl:"/Invoice/Index"}).when("/quan-ly-khach-hang",{templateUrl:"/Customer/Index"}).when("/chi-tiet-khach-hang",{templateUrl:"/Customer/Detail",controller:"CustomerController"}).when("/quan-ly-san-pham",{templateUrl:"/Product/Index",controller:"ProductController"}).when("/quan-ly-hang-hoa-dich-vu",{templateUrl:"/Category/Index",controller:"CategoryController"}).when("/cai-dat",{templateUrl:"/Settings/Index"}).when("/thong-tin-tai-khoan",{templateUrl:"/Settings/UserSettings"}).when("/dai-hoa-don-cho",{templateUrl:"/Invoice/InvoiceWait"}).when("/cai-dat-tai-khoan",{templateUrl:"/Settings/AccountSetting"}).when("/thong-bao-phat-hanh",{templateUrl:"/Settings/Announcement"}).when("/quan-ly-nguoi-dung",{templateUrl:"/User/Index"}).when("/cong-cu",{templateUrl:"/Settings/Tool",controller:"SettingsController"}).when("/danh-muc",{templateUrl:"/Settings/AttachementFile",controller:"SettingsController"}).when("/bao-cao-tinh-hinh-su-dung-hoa-don",{templateUrl:"/Statistic/UsingInvoice",controller:"StatisticController"}).when("/bang-ke-hoa-don-dau-ra",{templateUrl:"/Statistic/OutputInvoice",controller:"StatisticController"}).when("/lich-su-gui-mail",{templateUrl:"/Statistic/MailHistory",controller:"StatisticController"}).when("/bao-cao-lich-su-hoat-dong",{templateUrl:"/Statistic/ActionHistory",controller:"StatisticController"}).when("/mau-hoa-don/:id",{templateUrl:"/TempInvoice/Index",controller:"TempInvoiceController"}).when("/settings-template/:id",{templateUrl:"/SettingTemplate/Index",controller:"SettingTemplateController"}).when("/mau-hoa-don",{templateUrl:"/TempInvoice/Index",controller:"TempInvoiceController"}).when("/bien-lai-thu-phi-le-phi",{templateUrl:"/Receipt/Index",controller:"ReceiptController"}).when("/quan-ly-cong-to",{templateUrl:"/Meter/Index",controller:"MeterController"}).when("/nhat-ky-truy-cap",{templateUrl:"/Log/Index",controller:"LogController"}).when("/tien-thanh-toan",{templateUrl:"/CurrencyUnit/Index",controller:"CurrencyUnitController"}).when("/hinh-thuc-thanh-toan",{templateUrl:"/PaymentMethod/Index",controller:"PaymentMethodController"}).when("/don-vi-tinh",{templateUrl:"/QuantityUnit/Index",controller:"QuantityUnitController"}).when("/cai-dat-he-thong",{templateUrl:"/Settings/Parameters",controller:"SettingsController"}).otherwise({redirectTo:"/tong-quan"});t.html5Mode(!1).hashPrefix("")}]);app.factory("CommonFactory",["$timeout",function(n){var t={};return t.PostDataAjax=function(t,i,r,u){u||(u=6e4);$.ajax({url:t,type:"POST",headers:{"X-Requested-With":"Novaon-DS","Token-String":"","Device-UUID":""},timeout:u,cache:!0,crossDomain:!0,contentType:"application/json; charset=utf-8;",dataType:"json",data:i,processData:!0,beforeSend:function(){},async:!0,tryCount:0,retryLimit:3,success:function(t){t?n(function(){r(t)},10):n(r,10)},error:function(){n(r,10)}})},t}]);app.factory("rootVar",function(){var n=null;return{getTemp:function(){return n},setTemp:function(t){n=t}}});app.factory("persistObject",function(){function t(t,i){n[t]=i}function i(t){return n[t]}var n=[];return{set:t,get:i}});app.factory("permissions",function(n){var t;return{setPermissions:function(i){t=i;n.$broadcast("permissionsChanged")},hasPermission:function(n){var i=!1;return(t||(t=localStorage.roles&&typeof localStorage.roles.toLowerCase()=="string"?[localStorage.roles]:localStorage.roles),!t)?!1:(angular.forEach(n,function(n){if(!i)return n=n.trim(),angular.forEach(t,function(t){t&&(i=i||t.trim()===n)})}),i)}}});app.directive("goClick",function(n){return function(t,i,r){var u;r.$observe("goClick",function(n){u=n});i.bind("click",function(){t.$apply(function(){n.path(u)})})}});app.directive("autoComplete",function(n){return function(t,i,r){i.autocomplete({source:t[r.uiItems],select:function(){n(function(){i.trigger("input")},0)}})}});app.directive("sortable",function(){return{restrict:"A",link:function(n,t){return t.sortable({connectToSortable:$("#iframe_templateViewInvoice").contents().find("#sortable").sortable({revert:!0,iframeFix:!0}),revert:!0,iframeFix:!0})}}});dyn_functions=[];callbackExec=function(){};validation={isEmailAddress:function(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)},isNotEmpty:function(n){return/\S+/.test(n)},isNumber:function(n){return/^\d+$/.test(n)},isSame:function(n,t){return n===t}};app.directive("clearabletextbox",function(n){return{restrict:"E",scope:{iconposition:"@",textboxtype:"@",textboxplaceholder:"@",textboxmodel:"=",textboxmaxlength:"@",resultchange:"&",resultchangedelay:"@",resultchangeminlength:"@",submitonenter:"&",cleartext:"&",blur:"&",disable:"=",textalignment:"@",isnumberformat:"=",isnumberformat3digit:"=",islargetext:"=",disablenumber:"=",allowonlynumber:"=",nfocus:"=",isinteger:"=",focustextbox:"=",textview:"=?"},transclude:!0,templateUrl:"/Directives/ClearableTextBox.html?v=2",link:function(t,i){var r=null,f;t.textboxmodel=t.textview+"";var u=function(){var u,o,s,r,l,h;if(typeof t.textboxmodel=="string"&&(t.textboxmodel=t.textboxmodel.trim()),t.textboxmodel.length>1){while(t.textboxmodel.charAt(0)=="0"&&t.textboxmodel.charAt(1)!=".")t.textboxmodel=t.textboxmodel.substr(1);u=t.textboxmodel.replace(/[^\d.\','] /g,"");o=u.indexOf(".");o>=0&&(u=u.slice(0,o+3));var c=u.split("."),n=c[0],e=c[1];if(n=n.replace(/[^\d]/g,""),n.length>3)for(s=Math.floor(n.length/3);s>0;)r=n.indexOf(","),r<0&&(r=n.length),r-3>0&&(n=n.substr(0,r-3)+","+n.substr(r-3)),--s;e=e===undefined?"":"."+e;l=n+e;t.textboxmodel=l;try{var a=i[0].children[0].children[0],f=$(a),v=a;f.is(":focus")||f.focus();v.setSelectionRange?(h=f.val().length*2,setTimeout(function(){v.setSelectionRange(h,h)},1)):f.val(f.val());this.scrollTop=999999}catch(y){}}},e=function(){var u,o,s,r,l,h;if(typeof t.textboxmodel=="string"&&(t.textboxmodel=t.textboxmodel.trim()),t.textboxmodel.length>1){while(t.textboxmodel.charAt(0)=="0"&&t.textboxmodel.charAt(1)!=".")t.textboxmodel=t.textboxmodel.substr(1);u=t.textboxmodel.replace(/[^\d.\','] /g,"");o=u.indexOf(".");o>=0&&(u=u.slice(0,o+10));var c=u.split("."),n=c[0],e=c[1];if(n=n.replace(/[^\d]/g,""),n.length>3)for(s=Math.floor(n.length/3);s>0;)r=n.indexOf(","),r<0&&(r=n.length),r-3>0&&(n=n.substr(0,r-3)+","+n.substr(r-3)),--s;e=e===undefined?"":"."+e;l=n+e;t.textboxmodel=l;try{var a=i[0].children[0].children[0],f=$(a),v=a;f.is(":focus")||f.focus();v.setSelectionRange?(h=f.val().length*2,setTimeout(function(){v.setSelectionRange(h,h)},1)):f.val(f.val());this.scrollTop=999999}catch(y){}}},o=function(){r&&n.cancel(r);(!t.resultchangeminlength||t.textboxmodel&&t.textboxmodel.trim().length>=t.resultchangeminlength)&&(r=n(function(){t.resultchange()},t.resultchangedelay))};t.Change=function(){if(t.textboxmodel==null&&(t.textboxmodel=""),t.isnumberformat&&(isNaN(parseFloat(t.textboxmodel))?t.textboxmodel="":u()),t.isnumberformat3digit&&(isNaN(parseFloat(t.textboxmodel))?t.textboxmodel="":e()),t.isinteger){var i=t.textboxmodel.replace(/[^0-9]/g,"");t.textboxmodel=t.textboxmodel.replace(",","");i!==t.textboxmodel?t.textboxmodel="":u()}t.resultchangedelay?o():t.resultchange&&n(t.resultchange)};t.Change();t.KeyPress=function(i){t.submitonenter&&(i.keyCode==13||i.which==13)&&n(t.submitonenter)};t.KeyDown=function(n){if(t.isnumberformat||t.isnumberformat3digit||t.textboxtype=="tel"){var i=n.keyCode>=48&&n.keyCode<=57||n.keyCode>=96&&n.keyCode<=105||n.keyCode==39||n.keyCode==37||n.keyCode==35||n.keyCode==36||n.keyCode==190||n.keyCode==110||n.keyCode==9||n.keyCode==33||n.keyCode==34||n.keyCode==8||n.keyCode==46||n.ctrlKey;i||n.preventDefault()}t.disablenumber&&n.keyCode>48&&n.keyCode<57&&n.preventDefault();t.textboxmodel&&t.textboxmodel.length==t.textboxmaxlength&&n.keyCode!=46&&n.keyCode!=8&&n.preventDefault()};t.Clear=function(){t.textboxmodel="";t.cleartext&&n(t.cleartext)};t.Blur=function(){t.blur&&n(t.blur)};f=function(){t.type=t.isnumberformat&&t.textboxtype!="number"?"tel":t.textboxtype;t.textStyle="padding-";t.iconStyle="position:absolute;font-size:20px;line-height:40px;height:40px;width:34px;color:black;";t.iconposition=="left"?(t.textStyle=t.textStyle+"left:0px;text-align:right",t.iconStyle=t.iconStyle+"left"):(t.textStyle=t.textStyle+"right:0px;text-align:left",t.iconStyle=t.iconStyle+"right");t.iconStyle=t.iconStyle+":0";t.islargetext&&(t.textStyle=t.textStyle+";font-size:20px");t.maxLength=100;t.nfocus&&(t.focus=t.nfocus);t.textboxmaxlength&&(t.maxLength=t.textboxmaxlength);t.resultchangedelay&&(t.resultchangeminlength=t.resultchangeminlength?parseInt(t.resultchangeminlength):0);t.iconposition||(t.iconposition="right")};f()}}});app.directive("formatnumberinput",function(n){return{restrict:"E",scope:{iconposition:"@",textboxtype:"@",textboxplaceholder:"@",textboxmodel:"=",textboxmaxlength:"@",resultchange:"&",resultchangedelay:"@",resultchangeminlength:"@",submitonenter:"&",cleartext:"&",blur:"&",disable:"=",textalignment:"@",isnumberformat:"=",isnumberformat3digit:"=",islargetext:"=",disablenumber:"=",allowonlynumber:"=",nfocus:"=",isinteger:"=",focustextbox:"=",textview:"=?"},transclude:!0,templateUrl:"/Directives/ClearableTextBox.html?v=2",link:function(t,i){var r=null,u,f,e;t.textboxmodel=t.textview+"";u=function(){var r=t.textboxmodel,f,u;r==="string"&&(r=t.textboxmodel=t.textboxmodel.trim());res=ParseVietnameseNumber(r);res===!1&&(res=r);res=parseInt(res.toString().replace(/\./g,""));f=formatCurrency(res);t.textboxmodel=f;try{var e=i[0].children[0].children[0],n=$(e),o=e;n.is(":focus")||n.focus();o.setSelectionRange?(u=n.val().length*2,setTimeout(function(){o.setSelectionRange(u,u)},1)):n.val(n.val());this.scrollTop=999999}catch(s){}};f=function(){r&&n.cancel(r);(!t.resultchangeminlength||t.textboxmodel&&t.textboxmodel.trim().length>=t.resultchangeminlength)&&(r=n(function(){t.resultchange()},t.resultchangedelay))};t.Change=function(){t.textboxmodel==null&&(t.textboxmodel="");u();t.resultchangedelay?f():t.resultchange&&n(t.resultchange)};t.Change();t.KeyPress=function(i){t.submitonenter&&(i.keyCode==13||i.which==13)&&n(t.submitonenter)};t.KeyDown=function(n){if(t.isnumberformat||t.isnumberformat3digit||t.textboxtype=="tel"){var i=n.keyCode>=48&&n.keyCode<=57||n.keyCode>=96&&n.keyCode<=105||n.keyCode==39||n.keyCode==37||n.keyCode==35||n.keyCode==36||n.keyCode==190||n.keyCode==110||n.keyCode==9||n.keyCode==33||n.keyCode==34||n.keyCode==8||n.keyCode==46||n.ctrlKey;i||n.preventDefault()}t.disablenumber&&n.keyCode>48&&n.keyCode<57&&n.preventDefault();t.textboxmodel&&t.textboxmodel.length==t.textboxmaxlength&&n.keyCode!=46&&n.keyCode!=8&&n.preventDefault()};t.Clear=function(){t.textboxmodel="";t.cleartext&&n(t.cleartext)};t.Blur=function(){t.blur&&n(t.blur)};e=function(){t.type=t.isnumberformat&&t.textboxtype!="number"?"tel":t.textboxtype;t.textStyle="padding-";t.iconStyle="position:absolute;font-size:20px;line-height:40px;height:40px;width:34px;color:black;";t.iconposition=="left"?(t.textStyle=t.textStyle+"left:40px;text-align:right",t.iconStyle=t.iconStyle+"left"):(t.textStyle=t.textStyle+"right:0;text-align:right",t.iconStyle=t.iconStyle+"right");t.iconStyle=t.iconStyle+":0";t.islargetext&&(t.textStyle=t.textStyle+";font-size:20px");t.maxLength=100;t.nfocus&&(t.focus=t.nfocus);t.textboxmaxlength&&(t.maxLength=t.textboxmaxlength);t.resultchangedelay&&(t.resultchangeminlength=t.resultchangeminlength?parseInt(t.resultchangeminlength):0);t.iconposition||(t.iconposition="right")};e()}}});app.directive("format",["$filter",function(n){return{require:"?ngModel",link:function(t,i,r,u){u&&(u.$formatters.unshift(function(){return n(r.format)(u.$modelValue)}),u.$parsers.unshift(function(t){var u=t.replace(/[^\d|\-+|\.+]/g,"");return i.val(n(r.format)(u)),u}))}}}]);app.directive("hasPermission",["permissions",function(n){return{link:function(t,i,r){i.ready(function(){function e(){var t=n.hasPermission([u]);t&&!f||!t&&f||i.addClass("disabled-element")}var u=r.hasPermission.trim(),f=u[0]==="!";f&&(u=u.slice(1).trim());e();t.$on("permissionsChanged",e)})}}}]);Number.prototype.formatMoney=function(n,t,i){var u=this,n=isNaN(n=Math.abs(n))?2:n,t=t==undefined?".":t,i=i==undefined?",":i,e=u<0?"-":"",f=String(parseInt(u=Math.abs(Number(u)||0).toFixed(n))),r=(r=f.length)>3?r%3:0;return e+(r?f.substr(0,r)+i:"")+f.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+i)+(n?t+Math.abs(u-f).toFixed(n).slice(2):"")};app.directive("suggestproduct",function(n,t){return{restrict:"E",scope:{textboxplaceholder:"=?",pagesize:"=?",selectsearchresult:"&",keypress:"&",selectresultid:"=?",selectbarcoderesult:"&",autoclear:"=?",isbasequantityunit:"=?",delayresearch:"=?",textboxmaxlength:"=?",textview:"=?",disabled:"=?",userkeycode:"=?",fucusme:"=?"},transclude:!0,templateUrl:"/Directives/SuggestProduct.html?v=12",link:function(i){var r=null;i.isShowlist=!0;i.isMousOverFocus=!1;i.delayresearch=i.delayresearch||500;i.textboxmaxlength=i.textboxmaxlength||1e3;i.keyword=i.textview||"";i.fucusme=i.fucusme||!0;i.clearTextSearch=function(){i.lstObject=null;i.keyword=null};i.KeyDown=function(n){var t,r;if(n.keyCode==40||n.keyCode==38)if(i.lstObject!=null&&i.lstObject.length>0){for(t=-1,r=0;r<i.lstObject.length;r++)if(i.lstObject[r].isSelected){t=r;break}t+=n.keyCode==40?1:-1;t>=i.lstObject.length?t=0:t<0&&(t=i.lstObject.length-1);i.lstObject.forEach(function(n){n.isSelected=!1});i.lstObject[t].isSelected=!0}else i.userkeycode=n.keyCode,i.keypress();else if(n.keyCode==13){if(i.lstObject!=null&&i.lstObject.length>0&&i.isShowlist){for(t=-1,r=0;r<i.lstObject.length;r++)if(i.lstObject[r].isSelected){t=r;break}t=t==-1?0:t;i.redirect(i.lstObject[t])}i.userkeycode=n.keyCode;i.keypress()}else i.keyword&&i.keyword.length==i.textboxmaxlength&&n.keyCode!=46&&n.keyCode!=8&&n.preventDefault()};i.LossFocus=function(){i.isMousOverFocus||(i.isShowlist=!1)};i.MousOverFocus=function(n){if(i.isMousOverFocus=n,n)for(var t=0;t<i.lstObject.length;t++)if(i.lstObject[t].isSelected){i.lstObject[t].isSelected=!1;break}};i.search=function(){r&&n.cancel(r);r=n(function(){i.keyword.length>=2?(i.isSearching=!0,i.errorMessage=null,$.ajax({url:"/Product/SuggestByObject",type:"POST",dataType:"json",contentType:"application/json;charset=utf-8;",async:!1,data:JSON.stringify({strKeyword:i.keyword,intPageSize:i.pagesize}),success:function(t){n(function(){t&&(t.rs?i.keyword.length>0&&(i.lstObject=t.listResult):alert(t.msg));i.isRedirect=!1;i.isSearching=!1})}})):(i.isRedirect=!1,i.lstObject=null);i.textview=i.keyword},i.delayresearch)};i.redirect=function(u){n.cancel(r);i.isSearching=!1;i.lstObject=null;t.selectedResultobj=u;n(i.selectsearchresult,50);i.keyword=u.PRODUCTNAME}}}});app.directive("suggestcustomer",function(n,t){return{restrict:"E",scope:{textboxplaceholder:"=?",pagesize:"=?",selectsearchresult:"&",keypress:"&",selectresultid:"=?",selectbarcoderesult:"&",autoclear:"=?",isbasequantityunit:"=?",delayresearch:"=?",textboxmaxlength:"=?",textview:"=?",disabled:"=?",userkeycode:"=?",fucusme:"=?",keyword:"=?",url:"=?"},transclude:!0,templateUrl:"/Directives/SuggestCustomer.html?v=2",link:function(i){var r=null;i.isShowlist=!0;i.isMousOverFocus=!1;i.delayresearch=i.delayresearch||500;i.textboxmaxlength=i.textboxmaxlength||1e3;i.fucusme=i.fucusme||!0;i.clearTextSearch=function(){i.lstObject=null;i.keyword=null};i.KeyDown=function(n){var t,r;if(n.keyCode==40||n.keyCode==38)if(i.lstObject!=null&&i.lstObject.length>0){for(t=-1,r=0;r<i.lstObject.length;r++)if(i.lstObject[r].isSelected){t=r;break}t+=n.keyCode==40?1:-1;t>=i.lstObject.length?t=0:t<0&&(t=i.lstObject.length-1);i.lstObject.forEach(function(n){n.isSelected=!1});i.lstObject[t].isSelected=!0}else i.userkeycode=n.keyCode,i.keypress();else if(n.keyCode==13){if(i.lstObject!=null&&i.lstObject.length>0&&i.isShowlist){for(t=-1,r=0;r<i.lstObject.length;r++)if(i.lstObject[r].isSelected){t=r;break}t=t==-1?0:t;i.redirect(i.lstObject[t])}i.userkeycode=n.keyCode;i.keypress()}else i.keyword&&i.keyword.length==i.textboxmaxlength&&n.keyCode!=46&&n.keyCode!=8&&n.preventDefault()};i.LossFocus=function(){i.isMousOverFocus||(i.isShowlist=!1)};i.MousOverFocus=function(n){if(i.isMousOverFocus=n,n)for(var t=0;t<i.lstObject.length;t++)if(i.lstObject[t].isSelected){i.lstObject[t].isSelected=!1;break}};i.search=function(){r&&n.cancel(r);r=n(function(){i.keyword.length>=2?(i.isSearching=!0,i.errorMessage=null,$.ajax({url:i.url,type:"POST",dataType:"json",contentType:"application/json;charset=utf-8;",async:!1,data:JSON.stringify({strKeyword:i.keyword,intPageSize:i.pagesize}),success:function(t){n(function(){t&&(t.rs?i.keyword.length>0&&(i.lstObject=t.listResult):alert(t.msg));i.isRedirect=!1;i.isSearching=!1})}})):(i.isRedirect=!1,i.lstObject=null)},i.delayresearch)};i.redirect=function(u){n.cancel(r);i.isSearching=!1;i.lstObject=null;t.selectedCustomer=u;n(i.selectsearchresult,50);i.keyword=u.CUSNAME}}}});app.directive("suggestemployee",function(n,t){return{restrict:"E",scope:{textboxplaceholder:"=?",pagesize:"=?",selectsearchresult:"&",keypress:"&",selectresultid:"=?",selectbarcoderesult:"&",autoclear:"=?",isbasequantityunit:"=?",delayresearch:"=?",textboxmaxlength:"=?",textview:"=?",disabled:"=?",userkeycode:"=?",fucusme:"=?",keyword:"=?"},transclude:!0,templateUrl:"/Directives/SuggestEmployee.html?v=2",link:function(i){var r=null;i.isShowlist=!0;i.isMousOverFocus=!1;i.delayresearch=i.delayresearch||500;i.textboxmaxlength=i.textboxmaxlength||1e3;i.fucusme=i.fucusme||!0;i.clearTextSearch=function(){i.lstObject=null;i.keyword=null};i.KeyDown=function(n){var t,r;if(n.keyCode==40||n.keyCode==38)if(i.lstObject!=null&&i.lstObject.length>0){for(t=-1,r=0;r<i.lstObject.length;r++)if(i.lstObject[r].isSelected){t=r;break}t+=n.keyCode==40?1:-1;t>=i.lstObject.length?t=0:t<0&&(t=i.lstObject.length-1);i.lstObject.forEach(function(n){n.isSelected=!1});i.lstObject[t].isSelected=!0}else i.userkeycode=n.keyCode,i.keypress();else if(n.keyCode==13){if(i.lstObject!=null&&i.lstObject.length>0&&i.isShowlist){for(t=-1,r=0;r<i.lstObject.length;r++)if(i.lstObject[r].isSelected){t=r;break}t=t==-1?0:t;i.redirect(i.lstObject[t])}i.userkeycode=n.keyCode;i.keypress()}else i.keyword&&i.keyword.length==i.textboxmaxlength&&n.keyCode!=46&&n.keyCode!=8&&n.preventDefault()};i.LossFocus=function(){i.isMousOverFocus||(i.isShowlist=!1)};i.MousOverFocus=function(n){if(i.isMousOverFocus=n,n)for(var t=0;t<i.lstObject.length;t++)if(i.lstObject[t].isSelected){i.lstObject[t].isSelected=!1;break}};i.search=function(){r&&n.cancel(r);r=n(function(){i.keyword.length>=2?(i.isSearching=!0,i.errorMessage=null,$.ajax({url:"/Customer/SuggestByObject",type:"POST",dataType:"json",contentType:"application/json;charset=utf-8;",async:!1,data:JSON.stringify({strKeyword:i.keyword,intPageSize:i.pagesize}),success:function(t){n(function(){t&&(t.rs?i.keyword.length>0&&(i.lstObject=t.listResult):alert(t.msg));i.isRedirect=!1;i.isSearching=!1})}})):(i.isRedirect=!1,i.lstObject=null)},i.delayresearch)};i.redirect=function(u){n.cancel(r);i.isSearching=!1;i.lstObject=null;t.selectedCustomer=u;n(i.selectsearchresult,50);i.keyword=u.CUSBUYER}}}});app.directive("suggestuser",function(n,t){return{restrict:"E",scope:{textboxplaceholder:"=?",pagesize:"=?",selectsearchresult:"&",keypress:"&",selectresultid:"=?",selectbarcoderesult:"&",autoclear:"=?",isbasequantityunit:"=?",delayresearch:"=?",textboxmaxlength:"=?",textview:"=?",disabled:"=?",userkeycode:"=?",fucusme:"=?",keyword:"=?",url:"=?"},transclude:!0,templateUrl:"/Directives/SuggestUser.html?v=2",link:function(i){var r=null;i.isShowlist=!0;i.isMousOverFocus=!1;i.delayresearch=i.delayresearch||500;i.textboxmaxlength=i.textboxmaxlength||1e3;i.fucusme=i.fucusme||!0;i.clearTextSearch=function(){i.lstObject=null;i.keyword=null};i.KeyDown=function(n){var t,r;if(n.keyCode==40||n.keyCode==38)if(i.lstObject!=null&&i.lstObject.length>0){for(t=-1,r=0;r<i.lstObject.length;r++)if(i.lstObject[r].isSelected){t=r;break}t+=n.keyCode==40?1:-1;t>=i.lstObject.length?t=0:t<0&&(t=i.lstObject.length-1);i.lstObject.forEach(function(n){n.isSelected=!1});i.lstObject[t].isSelected=!0}else i.userkeycode=n.keyCode,i.keypress();else if(n.keyCode==13){if(i.lstObject!=null&&i.lstObject.length>0&&i.isShowlist){for(t=-1,r=0;r<i.lstObject.length;r++)if(i.lstObject[r].isSelected){t=r;break}t=t==-1?0:t;i.redirect(i.lstObject[t])}i.userkeycode=n.keyCode;i.keypress()}else i.keyword&&i.keyword.length==i.textboxmaxlength&&n.keyCode!=46&&n.keyCode!=8&&n.preventDefault()};i.LossFocus=function(){i.isMousOverFocus||(i.isShowlist=!1)};i.MousOverFocus=function(n){if(i.isMousOverFocus=n,n)for(var t=0;t<i.lstObject.length;t++)if(i.lstObject[t].isSelected){i.lstObject[t].isSelected=!1;break}};i.search=function(){r&&n.cancel(r);r=n(function(){i.keyword.length>=2?(i.isSearching=!0,i.errorMessage=null,$.ajax({url:i.url,type:"POST",dataType:"json",contentType:"application/json;charset=utf-8;",async:!1,data:JSON.stringify({strKeyword:i.keyword,intPageSize:i.pagesize}),success:function(t){n(function(){t&&(t.rs?i.keyword.length>0&&(i.lstObject=t.listResult):alert(t.msg));i.isRedirect=!1;i.isSearching=!1})}})):(i.isRedirect=!1,i.lstObject=null)},i.delayresearch)};i.redirect=function(u){n.cancel(r);i.isSearching=!1;i.lstObject=null;t.SelectedUser=u;n(i.selectsearchresult,50);i.keyword=u.EMAIL}}}});app.directive("onlyNumber",function(){return{restrict:"A",link:function(n,t){t.bind("input",function(){var i=this.selectionStart-1,n=this.value.replace(/[^0-9\.]/g,""),t;n.charAt(0)==="."&&(n=n.slice(1));t=n.indexOf(".")+1;t>=0&&(n=n.substr(0,t)+n.slice(t).replace(".",""));this.value!=n&&(this.value=n,this.selectionStart=i,this.selectionEnd=i)})}}});app.directive("ngMin",function(n){return{restrict:"A",require:"ngModel",link:function(t,i,r,u){t.$watch(r.ngMin,function(){u.$setViewValue(u.$viewValue)});var f=function(i){var f=t.$eval(r.ngMin)||0;return!n.isNullOrEmpty(i)&&i<f?(u.$setValidity("ngMin",!1),undefined):(u.$setValidity("ngMin",!0),i)};u.$parsers.push(f);u.$formatters.push(f)}}});app.directive("ngMax",function(){return{restrict:"A",link:function(n,t,i){t.bind("input",function(){var t=this.value.replace(/[^0-9\.]/g,""),u=parseFloat(n.$eval(i.ngMax))||Infinity,r=parseFloat(t);if(t!=null&&t!=""&&r>u){while(r>u)t=t.slice(0,-1),r=parseFloat(t);this.value=t}})}}});app.directive("focusOn",["$timeout",function(n){var t=function(n){if(!n.focusOn&&n.focusOn!="")throw"FocusOnCondition missing attribute to evaluate";};return{restrict:"A",link:function(i,r,u){t(u);i.$watch(u.focusOn,function(t){t==!0&&n(function(){r.focus()})})}}}]);app.directive("capitalize",function(){return{require:"ngModel",link:function(n,t,i,r){var u=function(n){var i,u;return n==undefined&&(n=""),i=n.toUpperCase(),i!==n&&(u=t[0].selectionStart,r.$setViewValue(i),r.$render(),t[0].selectionStart=u,t[0].selectionEnd=u),i};r.$parsers.push(u);u(n[i.ngModel])}}});app.directive("selectOnClick",["$window",function(n){return{restrict:"A",link:function(t,i){i.on("click",function(){n.getSelection().toString()||this.setSelectionRange(0,this.value.length)})}}}]);app.directive("customOnChange",["$timeout",function(n){return{restrict:"A",link:function(t,i,r){n(function(){var n=t.$eval(r.customOnChange);i.bind("change",n)},100)}}}]);app.directive("convertToNumber",function(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.push(function(n){return parseInt(n,10)});r.$formatters.push(function(n){return""+n})}}});app.directive("format",["$filter",function(n){return{require:"?ngModel",link:function(t,i,r,u){u&&(u.$formatters.unshift(function(){return n(r.format)(u.$modelValue)}),i.bind("blur",function(){var t=i.val().replace(/[^\d|\-+|\.+]/g,"");i.val(n(r.format)(t))}))}}}]);app.directive("myEnter",function(){return function(n,t,i){t.bind("keydown keypress",function(t){t.which===13&&(n.$apply(function(){n.$eval(i.myEnter)}),t.preventDefault())})}});app.directive("ckEditor",function(){return{require:"?ngModel",link:function(n,t,i,r){var u=CKEDITOR.replace(t[0]);if(r){u.on("pasteState",function(){n.$apply(function(){r.$setViewValue(u.getData())})});r.$render=function(){u.setData(r.$viewValue)}}}}});app.filter("numberFormat",function(){return function(n,t,i,r,u,f){try{if(isNaN(n))return 0;if(n==0){if(f=="true")return"";if(u=="true")return 0}var t=isNaN(t=Math.abs(t))?2:t,r=r==undefined?".":r,i=i==undefined?",":i,s=n<0?"-":"",o=parseInt(n=Math.abs(+n||0).toFixed(t))+"",e=(e=o.length)>3?e%3:0;return s+(e?o.substr(0,e)+i:"")+o.substr(e).replace(/(\d{3})(?=\d)/g,"$1"+i)+(t?r+Math.abs(n-o).toFixed(t).slice(2):"")}catch(h){return n}}});app.filter("dateTimeFormat",function(n){function t(){var i=new Date,n=i.getDate(),t=i.getMonth()+1,r=i.getFullYear();return n<10&&(n="0"+n),t<10&&(t="0"+t),n+"/"+t+"/"+r}return function(i){var e,u,r,f;return i?(e=i.replace(/\//g,"").replace("(","").replace(")","").replace("Date","").replace("+0700","").replace("-0000",""),i.indexOf("Date")>-1?(r=new Date(+e),u=n("date")(r,"dd/MM/yyyy"),f=r.getTime()+r.getTimezoneOffset()*6e4,r=new Date(f+252e5),t()===u?n("date")(r,"HH:mm")+" Hôm nay":n("date")(r,"HH:mm ")+" "+n("date")(r,"dd/MM/yyyy")):(u=n("date")(new Date(e),"dd/MM/yyyy"),t()===u?"Hôm nay":(f=u.getTime()+u.getTimezoneOffset()*6e4,r=new Date(f+252e5),n("date")(r,"dd/MM/yyyy")))):""}});app.filter("dateFormat",function(n){return function(t,i){if(!t)return"";var r=t.replace(/\//g,"").replace("(","").replace(")","").replace("Date","").replace("+0700","").replace("-0000",""),u=new Date(+r);return n("date")(u,i)}});app.filter("sumTotal",function(){return function(n,t){var i=n instanceof Array?n.length:0,r;if(typeof t=="undefined"||i===0)return i;if(isNaN(n[0][t]))throw"filter total can count only numeric values";else{for(r=0;i--;)r+=parseFloat(n[i][t]);return r}}});app.filter("totalSumPriceQty",function(){return function(n,t,i){if(angular.isUndefined(n)||angular.isUndefined(t)||angular.isUndefined(i))return 0;var r=0;return angular.forEach(n,function(n){r=r+parseFloat(n[t],10)*parseFloat(n[i],10)}),r}});app.filter("totalWithOperation",function(){return function(n,t,i,r){if(angular.isUndefined(n)||angular.isUndefined(t)||angular.isUndefined(i)||angular.isUndefined(r))return 0;var u=0;return angular.forEach(n,function(n){u+=parseFloat(eval(n[t]+r+n[i]))}),u}});app.filter("Contains",function(){return function(n,t){return n.indexOf(t)!=-1}});app.filter("IndexOf",function(){return function(n,t){return n?n.indexOf(t)!=-1:!1}});app.filter("numberFixedLen",function(){return function(n,t){var i=parseInt(n,10);if(t=parseInt(t,10),isNaN(i)||isNaN(t))return n;for(i=""+i;i.length<t;)i="0"+i;return i}}),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]);angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]);angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(n){var t=["$q","$cacheFactory","$timeout","$rootScope","cfpLoadingBar",function(t,i,r,u,f){function c(){r.cancel(h);f.complete();o=0;e=0}function s(t){var u,f=n.defaults,r;return t.method!=="GET"||t.cache===!1?(t.cached=!1,!1):(u=t.cache===!0&&f.cache===undefined?i.get("$http"):f.cache!==undefined?f.cache:t.cache,r=u!==undefined?u.get(t.url)!==undefined:!1,t.cached!==undefined&&r!==t.cached)?t.cached:(t.cached=r,r)}var e=0,o=0,l=f.latencyThreshold,h;return{request:function(n){return n.ignoreLoadingBar||s(n)||(u.$broadcast("cfpLoadingBar:loading",{url:n.url}),e===0&&(h=r(function(){f.start()},l)),e++,f.set(o/e)),n},response:function(n){return n.config.ignoreLoadingBar||s(n.config)||(o++,u.$broadcast("cfpLoadingBar:loaded",{url:n.config.url}),o>=e?c():f.set(o/e)),n},responseError:function(n){return n.config.ignoreLoadingBar||s(n.config)||(o++,u.$broadcast("cfpLoadingBar:loaded",{url:n.config.url}),o>=e?c():f.set(o/e)),t.reject(n)}}}];n.interceptors.push(t)}]);angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.includeSpinner=!0;this.includeBar=!0;this.latencyThreshold=100;this.startSize=.02;this.parentSelector="body";this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"><\/div><\/div>';this.$get=["$document","$timeout","$animate","$rootScope",function(n,t,i,r){function k(){var e=n.find(v);(t.cancel(s),u)||(r.$broadcast("cfpLoadingBar:started"),u=!0,w&&i.enter(o,e),p&&i.enter(c,e),f(b))}function f(n){if(u){var i=n*100+"%";y.css("width",i);h=n;t.cancel(l);l=t(function(){a()},250)}}function a(){var t,n,i;e()>=1||(t=0,n=e(),t=n>=0&&n<.25?(Math.random()*3+3)/100:n>=.25&&n<.65?Math.random()*3/100:n>=.65&&n<.9?Math.random()/50:n>=.9&&n<.99?.005:0,i=e()+t,f(i))}function e(){return h}function d(){r.$broadcast("cfpLoadingBar:completed");f(1);t.cancel(s);s=t(function(){i.leave(o,function(){h=0;u=!1});i.leave(c)},500)}var v=this.parentSelector,o=angular.element('<div id="loading-bar"><div class="bar"><div class="peg"><\/div><\/div><\/div>'),y=o.find("div").eq(0),c=angular.element(this.spinnerTemplate),l,s,u=!1,h=0,p=this.includeSpinner,w=this.includeBar,b=this.startSize;return{start:k,set:f,status:e,inc:a,complete:d,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();