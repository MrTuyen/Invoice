@using SAB.Common

@if (Model != null)
{
    <table class="table table-striped table-bordered table-condensed" style="width: 100%" data-totalpage="@ViewBag.TotalPages" data-currentpage="@ViewBag.CurrentPage">
        <thead>
            <tr>
                <th class="text-center" style="width: 50px">
                    <input type="checkbox" value="1" name="checkall" style="transform: scale(1.5)" />
                </th>
                <th class="text-center" style="width: 120px">Mã Item</th>
                <th>Tên Item</th>
            </tr>
        </thead>
        <tbody id="bodyListChonse">
            @foreach (PM_ITEM p in Model)
            {
                <tr class="gradeX RowChosen">
                    <td class="text-center">
                        <input type="checkbox" name="JsonObj" id="id_@p.ITEMID" value="@Newtonsoft.Json.JsonConvert.SerializeObject(p)" style="transform: scale(1.5)" />
                    </td>
                    <td class="text-center">
                        <label style="font-weight: 100" for="id_@p.ITEMID">@p.ITEMID</label>
                    </td>
                    <td>
                        <label style="font-weight: 100" for="id_@p.ITEMID"><span>@p.ITEMNAME</span></label>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <div class="text-right">
        <div class="btn-group divpage">
            <!--[PAGER]-->
        </div>
    </div>
}


<script>
    function addSelectNewProduct(_input) {
        var id = _input.attr('id');
        var check = $("#bodyListChonsed #" + id);
        if (check.length == 0) {
            var _tr = _input.closest('tr');
            _tr.clone().appendTo("#bodyListChonsed");
        } else {
            check.prop('checked', _input.is(':checked'));
        }
    }

    $(document).ready(function () {
        $('input[name="checkall"]').click(function () {
            $('#bodyListChonse input[type="checkbox"]').prop('checked', $(this).is(':checked'));

            $("#bodyListChonse input[type='checkbox']").each(function () {
                var _this = $(this);
                addSelectNewProduct(_this);
            });
        });

        $("#bodyListChonse input[type='checkbox']").change(function () {
            var _this = $(this);

            //Đưa qua bên được chọn
            //if (_this.is(':checked'))
                addSelectNewProduct(_this);
        });
    });

</script>


