@using SAB.Common
@{
    ViewBag.Title = "Lịch sử mua hàng";
    ViewBag.Description = "Customer Transaction History";
}


<div class="scrollable-content" ng-controller="CustomerController">
    <div ng-show="isLoading" class="app-content-loading" style="text-align: center;">
        <img class="loading-spinner" src="~/Content/img/loading.gif" />
    </div>
    <div class="form-signin" ng-hide="isLoading">
        <div class="row">
            <div class="col-md-2">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Mã, số đt, tên khách hàng" ng-model="keywords" />
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <select multiple="multiple" id="ddlStore" name="lstStoreID" style="width: 100%">
                        @foreach (StoreModel p in (ViewBag.Stores) as IEnumerable<StoreModel>)
                        {
                            <option value="@p.STOREID">@p.STOREID - @p.STORENAME</option>
                        }
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="col-md-6">
                    <input type="text" autocomplete="off" style="height:35px; width:100%;margin-left:0;margin-right:0; padding-left: 6px" name="txtFromDate" id="txtFromDate" class="datepicker" ng-model="txtFromDate" placeholder="Xuất từ ngày" />
                </div>

                <div class="col-md-6">
                    <input type="text" autocomplete="off" style="height:35px; width:100%;padding-left:0;padding-right:0; padding-left: 6px" name="txtToDate" id="txtToDate" class="datepicker" ng-model="txtToDate" placeholder="Đến ngày" />
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <button type="button" class="btn btn-warning btn-block" ng-click="Search(1)">
                        <span class="fa fa-search"></span> Tìm kiếm
                    </button>
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <button type="button" class="btn btn-success btn-block" ng-click="ExportHistoryToExcel()" ng-show="ListOutput != null && ListOutput.length >= 0">
                        <span class="fa fa-file-excel-o "></span> Xuất Excel
                    </button>
                </div>
            </div>
        </div>
        <div class="row text-right" style="margin: 0">
            <div class="col">
                <divpage pagemodel="intPage" totalpage="{{TotalPages}}" currentpage="{{currentPage}}" pageclick="Search(intPage)"></divpage>
            </div>
        </div>
    </div>
  
    <table class="table table-striped table-bordered" ng-show="ListOutput != null && ListOutput.length >= 0">
        <thead>
            <tr>
                <th class="text-center" style="width: 150px;">Mã Khách hàng</th>
                <th class="text-center">Tên khách hàng</th>
                <th class="text-center">Mã phiếu xuất</th>
                <th class="text-center">Mã sản phẩm</th>
                <th class="text-right">Tổng tiền bill</th>
                <th class="text-center" style="width: 200px ;">Ngày xuất</th>
                <th class="text-center">Cửa hàng xuất</th>
            </tr>
        </thead>
        <tbody>
            <tr class="gradeX" ng-repeat="p in ListOutput">
                <td class="text-center">{{p.CUSTOMERID}}</td>
                <td>{{p.CUSTOMERNAME}}</td>
                <td class="text-center">{{p.OUTPUTVOUCHERID}}</td>
                <td class="text-center">{{p.PRODUCTID}}</td>
                <td class="text-right">{{p.TOTALAOUMT|numberFormat:0}}</td>
                <td class="text-center">{{p.OUTPUTDATE | dateTimeFormat}}</td>
                <td><strong>{{p.STOREID}}</strong> - {{p.STORENAME}}</td>
            </tr>
        </tbody>
    </table>

</div>

<script src="/Content/js/jquery.fileDownload.js" type="text/javascript"></script>